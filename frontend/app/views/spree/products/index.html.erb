# coding: utf-8
<% if @products.empty? %>
  <%= Spree.t(:no_products_found) %>
<% else %>
  <div class="result-count"> 有<%= @products.total_count %>条相关产品 </div>
<% end %>


<% @all_brands.each do |brand| %>
  <%= link_to brand, params.merge({ brand: brand}), class: "brand-class" %>
<% end %>

<hr />

<% @all_locations.each do |location| %>
  <%= link_to location, params.merge({ location: location}), class: "location-class" %>
<% end %>

<hr />

<% @all_categries.each do |category| %>
  <%= link_to category, params.merge({ category: category}), class: "category-class" %>
<% end %>

<hr />


<%= link_to "销量 up", params.merge({ order: "sales_amount", sort: "ASC"}), class: "order-class" %>
<%= link_to "销量 down", params.merge({ order: "sales_amount", sort: "DESC"}), class: "order-class" %>
<%= link_to "Price up", params.merge({ order: "price", sort: "ASC"}), class: "order-class" %>
<%= link_to "Price down", params.merge({ order: "price", sort: "DESC"}), class: "order-class" %>
<%= link_to "上新时间 up", params.merge({ order: "available_on", sort: "ASC"}), class: "order-class" %>
<%= link_to "上新时间 down", params.merge({ order: "available_on", sort: "DESC"}), class: "order-class" %>


<% if params[:keywords] %>
  <div data-hook="search_results">
    <% if not @products.empty? %>
      <%= render :partial => 'spree/shared/products', :locals => { :products => @products, :taxon => @taxon } %>
    <% end %>
  </div>
<% else %>
  <div data-hook="homepage_products">
    <% cache(cache_key_for_products) do %>
      <%= render :partial => 'spree/shared/products', :locals => { :products => @products, :taxon => @taxon } %>
    <% end %>
  </div>
<% end %>
